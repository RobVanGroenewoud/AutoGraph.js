// jquery.autograph.js
/*global Highcharts:true */(function(a){function c(c){var d=c.attr("data-graph-url"),e=c.attr("data-graph-title"),f=c.attr("data-graph-type"),g=c.attr("data-graph-categories"),h=c.attr("data-graph-yaxis-text"),i={chart:{renderTo:a(c)[0],type:f||b.defaultType},credits:{enabled:!1},title:{text:e},xAxis:{categories:[]},yAxis:{title:{text:h}},series:[]},j=a('<div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div'),k=setTimeout(function(){c.prepend(j)},200);a.ajax({url:d,cache:!1,success:function(b){var c=a(b);i.title.text=i.title.text||c.find("title").text();i.yAxis.title.text=i.yAxis.title.text||c.find("yAxis text").text();i.chart.type=i.chart.type||c.find("type").text();var d=g||c.find("categories").text();a.each(d.split(","),function(a,b){i.xAxis.categories.push(b)});c.find("series").each(function(b,c){var d={name:a(c).find("name").text(),data:[]},e=a(c).find("data").text();a.each(e.split(","),function(a,b){d.data.push(parseInt(b,10))});i.series.push(d)});var e=new Highcharts.Chart(i)},error:function(e,f,g){var h=a("<div>Unable to load data from '"+d+"'</div>").addClass(b.errorClassName);c.prepend(h)},complete:function(){clearTimeout(k);j.hide()}})}var b={defaultType:"column",errorClassName:"alert alert-error"},d={init:function(d){d&&a.extend(b,d);return this.each(function(){var b=a(this);c(b)})}};a.fn.AutoGraph=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return d.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.AutoGraph")}})(jQuery);
// jquery.autograph.js
/*global Highcharts:true */(function(a){function c(c){var d=c.attr("data-graph-url"),e=c.attr("data-graph-title"),f=c.attr("data-graph-type"),g=c.attr("data-graph-categories"),h=c.attr("data-graph-yaxis-text"),i=c.attr("data-graph-stacking"),j={chart:{renderTo:a(c)[0],type:f||b.defaultType},credits:{enabled:!1},title:{text:e},xAxis:{categories:[]},yAxis:{title:{text:h}},plotOptions:{series:{stacking:i}},series:[]},k=a('<div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div'),l=setTimeout(function(){c.prepend(k)},200);a.ajax({url:d,cache:!1,success:function(b){var c=a(b);j.title.text=j.title.text||c.find("title").text();j.yAxis.title.text=j.yAxis.title.text||c.find("yAxis text").text();j.chart.type=j.chart.type||c.find("type").text();var d=g||c.find("categories").text();a.each(d.split(","),function(a,b){j.xAxis.categories.push(b)});var e=!1;c.find("series").each(function(b,c){var d=a(c).find("hidden").text()==="true",f=a(c).find("stack").text(),g=f?f:null;e=e||f.length>0;var h={name:a(c).find("name").text(),data:[],visible:!d,stack:g},i=a(c).find("data").text();a.each(i.split(","),function(a,b){h.data.push(parseInt(b,10))});j.series.push(h)});var f=new Highcharts.Chart(j)},error:function(e,f,g){var h=a("<div>Unable to load data from '"+d+"'</div>").addClass(b.errorClassName);c.prepend(h)},complete:function(){clearTimeout(l);k.hide()}})}var b={defaultType:"column",errorClassName:"alert alert-error"},d={init:function(d){d&&a.extend(b,d);return this.each(function(){var b=a(this);c(b)})}};a.fn.AutoGraph=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return d.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.AutoGraph")}})(jQuery);